<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MicroMoB">
<title>Micro-MoB (Microsimulation for mosquito-borne pathogens) • MicroMoB</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Micro-MoB (Microsimulation for mosquito-borne pathogens)">
<meta property="og:description" content="MicroMoB">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MicroMoB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/MicroMoB.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/bloodmeal.html">Blood feeding</a>
    <a class="dropdown-item" href="../articles/RM_mosquito.html">Ross-Macdonald mosquito model</a>
    <a class="dropdown-item" href="../articles/BQ_mosquito.html">Simple behavioral state mosquito model</a>
    <a class="dropdown-item" href="../articles/MOI_human.html">Queueing model for human superinfection</a>
    <a class="dropdown-item" href="../articles/BH_aqua.html">Beverton-Holt aquatic model</a>
    <a class="dropdown-item" href="../articles/RM_transmission.html">Ross-Macdonald transmission model</a>
    <a class="dropdown-item" href="../articles/Advanced.html">Advanced topics</a>
    <a class="dropdown-item" href="../articles/Contributing.html">Contributing</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dd-harp/MicroMoB/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Micro-MoB (Microsimulation for mosquito-borne pathogens)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/MicroMoB/blob/HEAD/vignettes/MicroMoB.Rmd" class="external-link"><code>vignettes/MicroMoB.Rmd</code></a></small>
      <div class="d-none name"><code>MicroMoB.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><strong>Micro-MoB</strong> is a software package which implements a
framework for building mathematical models of mosquito-borne pathogen
transmission (MBPT). The framework is flexible enough to incorporate
vastly different models while at the same time places constraints upon
how parts of the framework interact so that the software does not become
obfuscatingly complex each time a new feature must be added.</p>
<p>We define terms used to talk about <strong>Micro-MoB</strong>
below:</p>
<ul>
<li>
<strong>components</strong>: these are the irreducible “parts” of
MBPT models, and must be implemented in any model built in
<strong>Micro-MoB</strong>, even if only as a trivial model (e.g. as a
constant value or external forcing term). The components are adult
mosquitoes, immature (aquatic) mosquitoes, resident (modeled) humans,
non-resident visitors, and other blood hosts (e.g. livestock).
Components can themselves have arbitrarily complex internal structure,
but models in this framework insist each of these components be given a
definition (even if it is trivial, for example the constant
<code>0</code>).</li>
<li>
<strong>interface</strong>: each component defines an interface,
which other components and invariants (functions) can use to query
information about it. The interface defines what a component is expected
to compute and expose to the rest of the system.</li>
<li>
<strong>model</strong>: a specific instantiation of a component,
which necessarily fulfills that component’s interface. The SIS
(Susceptible-Infectious-Susceptible) model for human dynamics is a model
for the human component, for example.</li>
<li>
<strong>composition pattern</strong>: the specific set of components
and how they interact in <strong>Micro-MoB</strong>.</li>
<li>
<strong>invariant component</strong>: any computation which is
generic across any specific set of models and which uses the generic
interface to query state and compute values. The bloodmeal algorithm is
an example, and the code is a contract with the modeller meaning any
model fulfilling the component interface it fills will be able to
interact with the rest of the framework, and the existing set of models.
It is described in <code><a href="../articles/bloodmeal.html">vignette("bloodmeal")</a></code>.</li>
</ul>
<div class="section level3">
<h3 id="software-design">Software design<a class="anchor" aria-label="anchor" href="#software-design"></a>
</h3>
<p>To accomplish this component-interface design in R, we use the <a href="http://adv-r.had.co.nz/S3.html" class="external-link">S3 object system</a>. Each
component is a named element in the model object (an environment). The
interface defines a set of generic functions which dispatch on the
specific class of the object taking the place of that component.</p>
</div>
<div class="section level3">
<h3 id="dynamics">Dynamics<a class="anchor" aria-label="anchor" href="#dynamics"></a>
</h3>
<p>A simplified schematic of the relationships between components
(i.e. the model’s <em>dynamics</em>) in <strong>Micro-MoB</strong> is
shown below.</p>
<p><img src="DynamicsOverview.png" width="100%"></p>
<p>The aquatic (immature) mosquito component <span class="math inline">\(L\)</span> is in blue. Over a time step, it takes
in eggs laid by ovipositing adult mosquitoes <span class="math inline">\(G\)</span>, and updates state, producing newly
emerging adults <span class="math inline">\(\Lambda\)</span>. These
emerging mosquitoes are added to the adult mosquito component (green).
In the adult component, <span class="math inline">\(M\)</span>
represents the total mosquito density, <span class="math inline">\(Y\)</span> and <span class="math inline">\(Z\)</span> are infected and infectious mosquito
populations, respectively. Uninfected mosquitoes become infected by
biting infectious hosts, and during blood feeding are infected with
probability <span class="math inline">\(\kappa\)</span>, computed by the
bloodmeal (red). Infectious mosquitoes take bites on human hosts,
resulting in a human per-capita rate of infection <span class="math inline">\(EIR\)</span>, computed by the bloodmeal, which
changes prevalence of disease, <span class="math inline">\(X\)</span>.
The overall human component (yellow) has dynamics acting on <span class="math inline">\(H\)</span>.</p>
</div>
</div>
<div class="section level2">
<h2 id="components">Components<a class="anchor" aria-label="anchor" href="#components"></a>
</h2>
<p>For each component, the interface is defined in a file, for example,
<code>R/humans_interface.R</code> shows the user what methods must be
defined for any human model.</p>
<p>A specific implementation of a component is a model, and files that
replace <em>_interface</em> with the model name implement that model
(e.g. <code>R/humans_SIS.R</code> implements a SIS model).</p>
<p>We list the components which require interfaces below and specific
models to implement them.</p>
<div class="section level3">
<h3 id="mosquitoes">Mosquitoes<a class="anchor" aria-label="anchor" href="#mosquitoes"></a>
</h3>
<p>The mosquito component is responsible for all dynamics which update
adult mosquito populations. The interface is defined in
<code>R/mosquito_interface.R</code>, and the interface methods which are
required to be implemented can be found <a href="https://dd-harp.github.io/MicroMoB/reference/index.html#adult-mosquito-component">here</a>.</p>
</div>
<div class="section level3">
<h3 id="aquatic">Aquatic<a class="anchor" aria-label="anchor" href="#aquatic"></a>
</h3>
<p>The aquatic component is responsible for all dynamics which update
immature (aquatic stage) mosquito populations. The interface is defined
in <code>R/aquatic_interface.R</code>, and the interface methods with
are required to be implemented can be found <a href="https://dd-harp.github.io/MicroMoB/reference/index.html#aquatic-immature-mosquito-component">here</a>.</p>
</div>
<div class="section level3">
<h3 id="humans">Humans<a class="anchor" aria-label="anchor" href="#humans"></a>
</h3>
<p>The human component updates human populations. The interface is
defined in <code>R/humans_interface.R</code>, and the interface methods
with are required to be implemented can be found <a href="https://dd-harp.github.io/MicroMoB/reference/index.html#human-component">here</a>.</p>
</div>
<div class="section level3">
<h3 id="visitor">Visitor<a class="anchor" aria-label="anchor" href="#visitor"></a>
</h3>
<p>The human component updates human populations outside of the resident
population of the geographic area being simulated. The interface is
defined in <code>R/visitor_interface.R</code>, and the interface methods
with are required to be implemented can be found <a href="https://dd-harp.github.io/MicroMoB/reference/index.html#visitor-component">here</a>.</p>
</div>
<div class="section level3">
<h3 id="other-blood-hosts">Other blood hosts<a class="anchor" aria-label="anchor" href="#other-blood-hosts"></a>
</h3>
<p>The other (alternative) blood host component is responsible for other
blood hosts for mosquitoes (livestock, dogs, etc). The interface is
defined in <code>R/other_interface.R</code>, and the interface methods
with are required to be implemented can be found <a href="https://dd-harp.github.io/MicroMoB/reference/index.html#alternative-blood-hosts-component">here</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="dynamics-between-components">Dynamics between components<a class="anchor" aria-label="anchor" href="#dynamics-between-components"></a>
</h2>
<p>Now that we’ve seen the components and know where to find the
interfaces, we can present the dynamics again, but annotated with more
information telling us exactly what methods are used to pass information
between components. For example, we see a green arrow sending eggs,
<span class="math inline">\(G\)</span>, from the adult mosquitoes to the
aquatic mosquitoes component. Within the aquatic component (blue oval)
we see a green method, <code>compute_oviposit</code>, meaning that the
aquatic component’s state update method can use this interface method to
get the number of eggs laid each time step.</p>
<p>Please note we do not include the visitor or other blood host
components in this diagram, as they are supplied as external forcing (or
constants) to the bloodmeal and do not carry state.</p>
<p><img src="DynamicsDetailed.png" width="100%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean L. Wu, David L. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
